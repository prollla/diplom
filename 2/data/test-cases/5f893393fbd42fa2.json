{"uid":"5f893393fbd42fa2","name":"Тест на отправку сообщения","fullName":"api_test.tests.test_post_message#test_post_message","historyId":"1996dbe7546aaacf0d1b4904b8586d87","time":{"start":1732980800068,"stop":1732980800169,"duration":101},"status":"failed","statusMessage":"Failed: Error: 401","statusTrace":"headers = {'Authorization': 'Bot MTI4NjYwOTgxOTEzNzk5ODg4Mw.Gj2Mlk.YsVgU6PYv7xVW5bl7RYt9DLg2QeCU4OXToIiSw', 'Content-Type': 'application/json'}\nget_message_endpoint = <api_test.endpoints.get_message_endpoint.GetMessageEndpoint object at 0x7ff602253940>\npost_message_endpoint = <api_test.endpoints.post_message_endpoint.PostMessageEndpoint object at 0x7ff602252020>\n\n    @allure.title(\"Тест на отправку сообщения\")\n    def test_post_message(headers, get_message_endpoint, post_message_endpoint):\n        with allure.step(\"Отправка запроса\"):\n            data = {\n                'content': post_message_endpoint.make_latin_lower(10)\n            }\n            post_message_endpoint.post_message_request(headers, data)\n        with allure.step(\"Проверка статус кода\"):\n>           post_message_endpoint.check_status_code(200)\n\napi_test/tests/test_post_message.py:12: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <api_test.endpoints.post_message_endpoint.PostMessageEndpoint object at 0x7ff602252020>\ncode = 200\n\n    def check_status_code(self, code):\n        if self.response.status_code == code:\n            pass\n        else:\n>           pytest.fail(f'Error: {self.response.status_code}')\nE           Failed: Error: 401\n\napi_test/endpoints/base_endpoint.py:35: Failed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"get_message_endpoint","time":{"start":1732980800068,"stop":1732980800068,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"post_message_endpoint","time":{"start":1732980800068,"stop":1732980800068,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"headers","time":{"start":1732980800068,"stop":1732980800068,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"Failed: Error: 401","statusTrace":"headers = {'Authorization': 'Bot MTI4NjYwOTgxOTEzNzk5ODg4Mw.Gj2Mlk.YsVgU6PYv7xVW5bl7RYt9DLg2QeCU4OXToIiSw', 'Content-Type': 'application/json'}\nget_message_endpoint = <api_test.endpoints.get_message_endpoint.GetMessageEndpoint object at 0x7ff602253940>\npost_message_endpoint = <api_test.endpoints.post_message_endpoint.PostMessageEndpoint object at 0x7ff602252020>\n\n    @allure.title(\"Тест на отправку сообщения\")\n    def test_post_message(headers, get_message_endpoint, post_message_endpoint):\n        with allure.step(\"Отправка запроса\"):\n            data = {\n                'content': post_message_endpoint.make_latin_lower(10)\n            }\n            post_message_endpoint.post_message_request(headers, data)\n        with allure.step(\"Проверка статус кода\"):\n>           post_message_endpoint.check_status_code(200)\n\napi_test/tests/test_post_message.py:12: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <api_test.endpoints.post_message_endpoint.PostMessageEndpoint object at 0x7ff602252020>\ncode = 200\n\n    def check_status_code(self, code):\n        if self.response.status_code == code:\n            pass\n        else:\n>           pytest.fail(f'Error: {self.response.status_code}')\nE           Failed: Error: 401\n\napi_test/endpoints/base_endpoint.py:35: Failed","steps":[{"name":"Отправка запроса","time":{"start":1732980800068,"stop":1732980800169,"duration":101},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Проверка статус кода","time":{"start":1732980800169,"stop":1732980800169,"duration":0},"status":"failed","statusMessage":"Failed: Error: 401\n","statusTrace":"  File \"/home/runner/work/diplom/diplom/api_test/tests/test_post_message.py\", line 12, in test_post_message\n    post_message_endpoint.check_status_code(200)\n  File \"/home/runner/work/diplom/diplom/api_test/endpoints/base_endpoint.py\", line 35, in check_status_code\n    pytest.fail(f'Error: {self.response.status_code}')\n  File \"/opt/hostedtoolcache/Python/3.10.15/x64/lib/python3.10/site-packages/_pytest/outcomes.py\", line 178, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"api_test.tests"},{"name":"suite","value":"test_post_message"},{"name":"host","value":"fv-az840-119"},{"name":"thread","value":"2077-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api_test.tests.test_post_message"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":2},"items":[{"uid":"8c1e25dc962913e5","reportUrl":"https://prollla.github.io/diplom/1//#testresult/8c1e25dc962913e5","status":"failed","statusDetails":"Failed: Error: 401","time":{"start":1732980695100,"stop":1732980695224,"duration":124}}]},"tags":[]},"source":"5f893393fbd42fa2.json","parameterValues":[]}